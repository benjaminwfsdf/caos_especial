<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>CAOS ‚Äî Edici√≥n Especial: Mente y C√≥digo (2025)</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#000000">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="CAOS Especial">

  <!-- Fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Rock+Salt&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">

  <style>
    :root {
      --ink:#000; 
      --paper:#fff; 
      --shadow:8px 8px 0 var(--ink);
      --radius:18px; 
      --pad:14px;
      --fz-title:clamp(22px,5.6vw,32px);
      --fz-body:clamp(14px,3.8vw,18px);
    }
    *{box-sizing:border-box}
    html,body{height:100%}

    body {
      margin:0;
      padding:env(safe-area-inset-top) env(safe-area-inset-right) calc(16px + env(safe-area-inset-bottom)) env(safe-area-inset-left);
      background:var(--paper);
      color:var(--ink);
      font-family:'Rock Salt',cursive;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      -webkit-tap-highlight-color:transparent;
      min-height:100dvh;
    }

    /* ===== Splash ===== */
    #splash {
      position:fixed;
      inset:0;
      z-index:9999;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#fff;
      transition:opacity .8s ease;
    }
    #splash.is-hidden {
      opacity:0;
      visibility:hidden;
      pointer-events:none;
    }
    .splash-wrap {
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:20px;
      animation:splashIn 1200ms ease forwards;
    }
    .logo-card {
      width:210px;
      height:210px;
      background:#fff;
      border:4px solid #000;
      border-radius:26px;
      box-shadow:16px 16px 0 #000;
      display:grid;
      place-items:center;
      overflow:hidden;
    }
    .logo-bg {
      width:100%;
      height:100%;
      background-image:url("icons/icon-192.png");
      background-position:center;
      background-repeat:no-repeat;
      background-size:120% 120%;
    }
    .brand {
      font-family:'Rock Salt', cursive;
      font-size:32px;
      letter-spacing:1px;
    }
    @keyframes splashIn {
      0%{transform:translateY(6px) scale(.86);opacity:0;}
      45%{transform:translateY(0) scale(1.06);opacity:1;}
      70%{transform:translateY(0) scale(.98);}
      100%{transform:translateY(0) scale(1);}
    }

    /* ===== App ===== */
    .app {
      width:100%;
      max-width:900px;
      margin:0 auto;
      display:grid;
      gap:18px;
      padding:16px;
    }

    .panel {
      background:var(--paper);
      border:3px solid var(--ink);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:var(--pad);
      text-align:center;
    }

    .titulo {
      font-size:var(--fz-title);
      border:3px dashed var(--ink);
      border-radius:14px;
      padding:10px 12px;
      background:var(--paper);
      margin-bottom:10px;
    }

    .carta-wrap {
      perspective:1200px;
      width:100%;
      max-width:400px;
      margin:auto;
    }

    .carta {
      width:100%;
      aspect-ratio:3/4.2;
      position:relative;
      transform-style:preserve-3d;
      transition:transform 0.9s cubic-bezier(.4,.2,.3,1.2);
      cursor:pointer;
      border-radius:var(--radius);
    }
    .carta.is-flipped {
      transform:rotateY(180deg);
    }

    .cara {
      position:absolute;
      inset:0;
      border:3px solid var(--ink);
      border-radius:var(--radius);
      background:var(--paper);
      box-shadow:var(--shadow);
      backface-visibility:hidden;
      overflow:hidden;
    }

    .cara img {
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
    }

    .cara.back {
      transform:rotateY(180deg);
    }

    .nota {
      font-family:'Comic Neue',sans-serif;
      font-size:14px;
      font-weight:700;
      margin-top:8px;
    }

    .btn {
      display:inline-block;
      margin-top:14px;
      background:var(--paper);
      border:2px dashed var(--ink);
      box-shadow:3px 3px 0 var(--ink);
      border-radius:12px;
      padding:10px 16px;
      font-family:'Comic Neue',sans-serif;
      font-weight:700;
      cursor:pointer;
      transition:transform 0.15s;
    }
    .btn:hover { transform:scale(1.05); }

    .dedicatoria {
      font-family:'Comic Neue',sans-serif;
      font-size:var(--fz-body);
      font-weight:700;
      margin-top:20px;
      border:3px solid var(--ink);
      border-radius:14px;
      box-shadow:4px 4px 0 var(--ink);
      padding:0 12px;
      background:var(--paper);
      line-height:1.4;
      overflow:hidden;
      max-height:0;
      transition:max-height 1.4s ease, padding 1.4s ease;
    }
    .dedicatoria.mostrar {
      max-height:700px;
      padding:12px;
    }

    footer {
      font-family:'Comic Neue',sans-serif;
      font-size:12px;
      font-weight:700;
      margin:20px auto 0;
      opacity:0.8;
      text-align:center;
      border:3px solid var(--ink);
      border-radius:14px;
      box-shadow:4px 4px 0 var(--ink);
      padding:10px 12px;
      max-width:600px;
      background:var(--paper);
    }
  </style>
</head>

<body>

  <!-- Splash -->
  <div id="splash" aria-hidden="true">
    <div class="splash-wrap">
      <div class="logo-card"><div class="logo-bg"></div></div>
      <div class="brand">CAOS Especial</div>
    </div>
  </div>

  <main class="app">
    <section class="panel">
      <h1 class="titulo">CAOS ‚Äî Edici√≥n Especial<br>Mente y C√≥digo (2025)</h1>

      <div class="carta-wrap" id="flipCard">
        <div class="carta">
          <div class="cara front">
            <img src="frente.png" alt="Carta Mente y C√≥digo">
          </div>
          <div class="cara back">
            <img src="contracara.png" alt="Contracara CAOS 2025">
          </div>
        </div>
      </div>

      <div class="nota">‚ú® Toca o haz clic para ver la carta por ambos lados.</div>

      <button class="btn" id="mostrarMensaje">üí¨ Ver mensaje</button>

      <div class="dedicatoria" id="dedicatoria">
        Profe Salvador:<br><br>
        Gracias por presentarme este proyecto y por incluirme en √©l.<br>
        M√°s all√° de la programaci√≥n o las cartas, me ense√±√≥ lo que significa creer en una idea y llevarla a cabo con pasi√≥n.<br>
        Admiro profundamente la forma en que ense√±a, no solo por su conocimiento, sino por los valores que transmite, su paciencia, y la manera en que logra ver el potencial en cada uno de nosotros.<br><br>
        Usted es una de esas personas que marcan una diferencia real ‚Äî no solo en el aula, sino en la vida de quienes tenemos la suerte de aprender con usted.<br>
        Gracias por confiar, por inspirar y por ser un ejemplo a seguir.<br><br>
        ‚Äî Benjam√≠n Gonz√°lez üß†üíª
      </div>
    </section>
  </main>

  <footer>¬© 2025 CAOS ‚Äî Edici√≥n Especial</footer>

  <script>
    const carta = document.querySelector('.carta');
    const dedicatoria = document.getElementById('dedicatoria');
    const botonMensaje = document.getElementById('mostrarMensaje');

    function toggleFlip() {
      carta.classList.toggle('is-flipped');
    }

    botonMensaje.addEventListener('click', () => {
      dedicatoria.classList.toggle('mostrar');
      botonMensaje.textContent = dedicatoria.classList.contains('mostrar')
        ? "üí¨ Ocultar mensaje"
        : "üí¨ Ver mensaje";
    });

    document.getElementById('flipCard').addEventListener('click', toggleFlip);
    document.getElementById('flipCard').addEventListener('touchstart', toggleFlip);

    /* ===== Splash control ===== */
    document.addEventListener("DOMContentLoaded", () => {
      const splash = document.getElementById("splash");
      if (!splash) return;

      const MIN_TIME = 1500;
      const MAX_TIME = 4000;
      const start = performance.now();

      const hideSplash = () => {
        splash.classList.add("is-hidden");
        setTimeout(() => splash.remove(), 800);
      };

      const finish = () => {
        const elapsed = performance.now() - start;
        const delay = Math.max(MIN_TIME - elapsed, 0);
        setTimeout(hideSplash, delay);
      };

      const logoImg = new Image();
      logoImg.src = "icons/icon-192.png";
      logoImg.onload = finish;
      logoImg.onerror = finish;

      if (document.fonts && document.fonts.ready) {
        document.fonts.ready.then(finish).catch(finish);
      }

      setTimeout(hideSplash, MAX_TIME);
    });

    /* ===== PWA service worker ===== */
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js")
        .then(() => console.log("‚úÖ Service Worker registrado"))
        .catch(err => console.log("‚ùå Error al registrar SW:", err));
    }
  </script>
</body>
</html>
